<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语知识点库 - SucofHR</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* 保持与主站一致的风格 */
        .knowledge-table {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
            overflow-x: auto;
            padding: 20px;
            margin: 2rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95em;
        }
        
        th {
            background: linear-gradient(to right, #4361ee, #3f37c9);
            color: white;
            padding: 12px 15px;
            text-align: left;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 10px 15px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            vertical-align: top;
        }
        
        tr:hover td {
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .error-message {
            color: #dc3545;
            padding: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>英语知识点库</h1>
            <p class="subtitle">数据最后更新: <span id="update-time">加载中...</span></p>
        </header>
        
        <div class="knowledge-table">
            <div id="loading">正在加载数据...</div>
            <div id="error-message" class="error-message" style="display:none;"></div>
            <table id="data-table" style="display:none;">
                <thead>
                    <tr>
                        <th>核心词</th>
                        <th>含义</th>
                        <th>应用场景</th>
                        <th>同义表达</th>
                        <th>反义表达</th>
                        <th>注意点</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        // 增强版数据加载
        function loadData() {
            const jsonUrl = 'https://raw.githubusercontent.com/SU-COF-HR/Su-cof-HR.github.io/main/data/english-data.json';
            
            fetch(jsonUrl)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP错误! 状态码: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    document.getElementById('loading').style.display = 'none';
                    renderTable(data);
                    document.getElementById('update-time').textContent = new Date().toLocaleString();
                })
                .catch(error => {
                    console.error('数据加载失败:', error);
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('error-message').style.display = 'block';
                    document.getElementById('error-message').innerHTML = `
                        数据加载失败，请检查：<br>
                        1. 确保已成功导出数据到GitHub<br>
                        2. 访问<a href="${jsonUrl}" target="_blank">数据源</a>验证是否有效
                    `;
                });
        }

        // 动态渲染表格
        function renderTable(data) {
            const tbody = document.querySelector('#data-table tbody');
            const table = document.getElementById('data-table');
            
            tbody.innerHTML = data.map(item => `
                <tr>
                    <td><strong>${item.核心词}</strong></td>
                    <td>${formatContent(item.含义)}</td>
                    <td>${formatContent(item.应用场景)}</td>
                    <td>${formatContent(item.同义表达)}</td>
                    <td>${formatContent(item.反义表达)}</td>
                    <td style="color: #dc3545;">${formatContent(item.注意点)}</td>
                </tr>
            `).join('');
            
            table.style.display = 'table';
        }

        // 内容格式化（兼容Obsidian格式）
        function formatContent(content) {
            if (!content || content === '无') return '-';
            return content
                .replace(/•/g, '•')  // 保留项目符号
                .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')  // 加粗文本
                .replace(/\n/g, '<br>');  // 换行处理
        }

        // 初始化加载
        loadData();
        // 每小时自动刷新
        setInterval(loadData, 3600000);
    </script>
</body>
</html>
